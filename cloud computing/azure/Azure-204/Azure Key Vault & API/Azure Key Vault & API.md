# Azure Key Vault & API

# Azure Key Vault

> Azure에서 민감한 장소를 저장하는 곳
> 

### 아키텍쳐

![스크린샷 2024-10-16 오전 10.21.57.png](Azure%20Key%20Vault%20&%20API%20121b01a7807e802fb7eddb1ec057d5b4/%25E1%2584%2589%25E1%2585%25B3%25E1%2584%258F%25E1%2585%25B3%25E1%2584%2585%25E1%2585%25B5%25E1%2586%25AB%25E1%2584%2589%25E1%2585%25A3%25E1%2586%25BA_2024-10-16_%25E1%2584%258B%25E1%2585%25A9%25E1%2584%258C%25E1%2585%25A5%25E1%2586%25AB_10.21.57.png)

### Key Vault란?

- 비밀관리
- 키 관리
- 인증서 관리
- 중앙 집중식으로 비밀을 제어

### Key Vault의 인증 방법

- Azure 리소스용 관리 : Azure 가상 머신에 앱 배포시 Key Vault에 엑세스 할 수 있는 가상 머신 ID 할당
- 서비스 사용자 및 인증서 : 키 모음에 엑세스 가능한 사용자 관리
- 서비스 주체 및 비밀 : 비밀을 사용해서 키 vault에 인증 → 권장x

### 관리 ID

- 시스템 할당 관리 ID
    - Azure 리소스 일부로 관리
    - 관리 ID가 생성된 리소스와 수명 주기 공유
    - 리소스간 공유 불가
    - Azure 가상머신에 참가자 추가
- 사용자 할당 ID
    - 독십 실행형 Azure 리소스로 관리
    - 할당된 리소스와 독립적인 수명 주기
    - `az identity create` 로 생성

# Azure API Mangament

- API를 관리
- 하나 이상의 API 작업으로 구성됨
- API 게이트웨이
- Azure portal
- 개발바 포털

### API 게이트웨이

![스크린샷 2024-10-16 오후 2.00.05.png](Azure%20Key%20Vault%20&%20API%20121b01a7807e802fb7eddb1ec057d5b4/%25E1%2584%2589%25E1%2585%25B3%25E1%2584%258F%25E1%2585%25B3%25E1%2584%2585%25E1%2585%25B5%25E1%2586%25AB%25E1%2584%2589%25E1%2585%25A3%25E1%2586%25BA_2024-10-16_%25E1%2584%258B%25E1%2585%25A9%25E1%2584%2592%25E1%2585%25AE_2.00.05.png)

- 클라이언트 - 서비스 사이에 배치됨
- 클라이언트 → 서비스 요청 라우팅
- 인증, SSL종료등도 수행 가능
- 정책 설정으로 API 처리 절차 등을 정의 가능

**게이트웨이 없이 API 배포한다면?**

- 클라이언트와 백엔드가 결합됨 → 복잡성 증가
- 한 작업에 대해 여러 API가 응답될 수 잇음
- 디자인패턴 도달 불가